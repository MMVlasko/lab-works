# Отчет по лабораторной работе № 23
## по курсу "Алгоритмы и структуры данных"

Студент группы М8О-108Б-23 Власко Михаил Михайлович

Работа выполнена

Преподаватель: каф. 806 Севастьянов Виктор Сергеевич

1. **Тема**: Динамические структуры данных. Обработка деревьев
2. **Цель работы**: Составить программу на языке Си для построения и обработки упорядоченного двоичного дерева,
узлы типа float. Реализовать функции добавления нового узла, текстовой визуализации дерева, удаления узла и вычисления 
некоторой функции в соответствии с вариантом.
3. **Задание (Вариант №2)**: Проверить, является ли двоичное дерево B-деревом.
4. **Идея, метод, алгоритм решения задачи**:
    - Составить программу на языке Си, реализующую:
        - интерфейс командной строки, обеспечивающий выполнение вышеописанных операций;
        - динамическую структуру, реализующую узлы двоичного дерева;
        - рекурсивные функции, обеспечивающие вставку или удаление узла, визуализацию дерева или проверку на то, 
          является дерево B-деревом.
5. **Сценарий выполнения работы**:
    1. Задать с помощью конструкции `typedef struct` структуру, содержащую 4 поля: одно поле типа `float`, содержащее
       значение узла, и 3 поле того же вновь вводимого типа, содержащих указатели на левого и правого потомка данного 
       узла, а также на родительский узел.
   2. Реализовать функцию `new_node`, принимающую значение нового узла и возвращающую ссылку на вновь созданный узел,
      указатели на потомков и родителя которого задаются равными `NULL`.
   3. Реализовать рекурсивную функцию `insert`, которая, начиная с корневого узла, постепенно спускается по вниз по 
      дереву, выбирая левого потомка, если вставляемое значение меньше значения данного узла, и правого потомка, если
      больше. Если очередной искомый потомок не обнаружен, на его место вставляется узел с требуемым значением, ссылка 
      помещается в соответсвующее поле родителя.
   4. Реализовать рекурсивный метод `show`, принимающий в качестве параметра ссылку на дерево, и выводящий его текстовую
      визуализацию в консоль. Метод последовательно применяется к узлам, при этом при каждом последующем рекурсивном 
      вызове передаётся параметр `level`, который при переходе к каждому последующему потомку увеличивается на единицу
      и указывает количество отступов, устанавливаемых перед очередным выводимым значением. Так как при визуализации
      последовательно нисходящие правые узлы выводятся на одной строке, спуск происходит по правым узлам, пока это 
      возможно. Если в некоторый момент у очередного узла отсутствуют потомки, происходит перенос строки, а метод 
      возвращается к родителю этого узла с помощью имеющегося указателя. С помощью символьного параметра `mode` каждый
      раз в метод передаётся направление, по которому произошёл переход в узел. При возвращении из правого потомка,
      таким образом, дальнейшее движение вниз может быть осуществлено только к левому потомку, а при возвращении из 
      левого - только вверх к родителю. Этими условиями исключается повторное распечатывание узла. Процесс завершается
      после возвращение к корневому узла при условии посещения обоих его потомков.
   5. Реализовать рекурсивную функцию `delete`, которая производит поиск и последующее удаление узла по следующим 
      правилам:
      - Если у узла нет потомков, то память, отведённая для него освобождается функцией `free`, а ссылка на узел у его
        родителя заменяется на `NULL`;
      - Если у узла есть один потомок, то ссылка на удаляемый узел у родителя заменяется на ссылку на единственного
        потомка, а память, отведённая на удаляемый узел освобождается аналогично предыдущему случаю;
      - Если у узла присутствуют оба потомка, то с помощью реализованной отдельно рекурсивной функции `minimum` среди 
        значений узлов правого потомка ищется минимальное значение. Так как узел, имеющий найденное минимальное 
        значение, всегда имеет 0 или 1 потомков, он удаляется с помощью одного из 2 предыдущих методов, а его значение 
        присваивается удаляемому узлу.
   6. Реализовать логическую рекурсивную функцию `is_btree`, проверяющую, является ли переданное в качестве аргумента 
      дерево B-деревом (деревом, у которого нет узлов степени 1).
   7. В основной функции программы с помощью бесконечного цикла `while` реализовать консольный командный 
      интерфейс, обеспечивающий работу с деревом (в т. ч. полное очищение дерева с помощью многократного применения 
      функции `delete`). Выход из цикла обеспечивается отдельной командой.

6. **Листинг**:
    - Пример сеанса работы с программой:
   
   ![](images/img.png)

    - Файл с исходным кодом программы на языке Си: [23.c](23.c).

7. **Замечания автора** по существу работы: отсутствуют.
8. **Выводы**: Написана и отлажена программа построения и обработки упорядоченного двоичного дерева на языке Си. Получен 
опыт работы с динамическими структурами данных, деревьями и их обходом и обработкой, а также рекурсивными функциями и 
разработкой командного интерфейса.
